<!-- Wrapper: full gradient background -->
<div class="min-h-screen bg-gradient-to-b from-[#fdebe9] to-[#e9f1ff] flex flex-col justify-center">

  <!-- Section chính: chiếm 2/3 chiều cao -->
  <section class="flex flex-col justify-center h-[66vh] px-6">
    <div class="max-w-xl w-full mx-auto text-left">

      <!-- Title -->
      <h1 class="text-4xl font-extrabold text-gray-900 mb-2 max-[430px]:text-3xl">
        Web3 Identity Search
      </h1>
      <p class="text-gray-700 text-lg mb-6 max-[430px]:text-base">
        Dive into the Web3 Identity Graph and Profiles
      </p>

      <!-- Search Bar Component with Event Binding -->
      <app-search-bar-component 
        (search)="handleSearch($event)">
      </app-search-bar-component>

      <!-- Trending -->
      <div class="mt-6 text-sm text-gray-800 max-[430px]:text-xs">
        <span class="font-semibold">Trending:</span>
        <div class="flex flex-wrap gap-2 mt-2">
          <button 
            class="flex items-center gap-1 bg-white rounded-full shadow px-3 py-1 hover:shadow-md transition cursor-pointer">
            <img src="assets/icons/ens.jpeg" class="w-4 h-4" alt="icon" />
            vitalik.eth
          </button>
          <button 
            class="flex items-center gap-1 bg-white rounded-full shadow px-3 py-1 hover:shadow-md transition cursor-pointer">
            <img src="assets/icons/eth.png" class="w-4 h-4" alt="icon" />
            0xd8da...6045
          </button>
          <button 
            class="flex items-center gap-1 bg-white rounded-full shadow px-3 py-1 hover:shadow-md transition cursor-pointer">
            <img src="assets/icons/farcaster.webp" class="w-4 h-4" alt="icon" />
            dwr.eth
          </button>
          <button 
            class="flex items-center gap-1 bg-white rounded-full shadow px-3 py-1 hover:shadow-md transition cursor-pointer">
            <img src="assets/icons/lens.jpg" class="w-4 h-4" alt="icon" />
            stani.lens
          </button>
          <button 
            class="flex items-center gap-1 bg-white rounded-full shadow px-3 py-1 hover:shadow-md transition cursor-pointer">
            <img src="assets/icons/x.png" class="w-4 h-4" alt="icon" />
            suji_yan
          </button>
        </div>
      </div>

    </div>
  </section>

  <!-- Search Results Section (if displaying on same page) -->
  <section *ngIf="(identityService.identity$ | async) || (identityService.loading$ | async) || (identityService.error$ | async)" 
           class="px-6 pb-12">
    <div class="max-w-4xl mx-auto">
      
      <!-- Loading State -->
      <div *ngIf="identityService.loading$ | async" class="text-center py-12">
        <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
        <p class="mt-4 text-gray-600">Searching across Web3 platforms...</p>
      </div>

      <!-- Error State -->
      <div *ngIf="identityService.error$ | async as error" class="max-w-xl mx-auto">
        <div class="bg-red-50 border border-red-200 rounded-lg p-4">
          <div class="flex items-start">
            <i class="fa fa-exclamation-circle text-red-500 text-xl mr-3 mt-0.5"></i>
            <div>
              <h3 class="text-red-800 font-semibold">Error</h3>
              <p class="text-red-700 text-sm mt-1">{{ error }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Results -->
      <div *ngIf="identityService.identity$ | async as identity" class="animate-fadeIn">
        <div class="bg-white rounded-xl shadow-xl p-6">
          <!-- Header -->
          <div class="mb-6">
            <h2 class="text-2xl font-bold text-gray-900">Connected Identities</h2>
            <p class="text-gray-500 text-sm mt-1">Found {{ identity.allProfiles.length }} profile(s)</p>
          </div>

          <!-- All Profiles Grid -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Farcaster -->
            <div *ngIf="identity.farcaster" class="p-4 bg-purple-50 rounded-lg border border-purple-100">
              <div class="flex items-center gap-3">
                <img 
                  *ngIf="identity.farcaster.avatar" 
                  [src]="identity.farcaster.avatar" 
                  [alt]="identity.farcaster.username || 'Farcaster'"
                  class="w-12 h-12 rounded-full">
                <div class="flex-1">
                  <div class="flex items-center gap-2 mb-1">
                    <i class="fa fa-broadcast-tower text-purple-600"></i>
                    <span class="font-semibold text-purple-900">Farcaster</span>
                  </div>
                  <p class="text-gray-700 font-medium">{{ identity.farcaster.username }}</p>
                  <a [href]="identity.farcaster.url" target="_blank" 
                     class="text-purple-600 hover:underline text-xs">
                    View →
                  </a>
                </div>
              </div>
            </div>

            <!-- ENS -->
            <div *ngIf="identity.ens" class="p-4 bg-blue-50 rounded-lg border border-blue-100">
              <div class="flex items-center gap-3">
                <img 
                  *ngIf="identity.ens.avatar" 
                  [src]="identity.ens.avatar" 
                  [alt]="identity.ens.username || 'ENS'"
                  class="w-12 h-12 rounded-full">
                <div class="flex-1">
                  <div class="flex items-center gap-2 mb-1">
                    <i class="fa fa-ethereum text-blue-600"></i>
                    <span class="font-semibold text-blue-900">ENS</span>
                  </div>
                  <p class="text-gray-700 font-medium">{{ identity.ens.username }}</p>
                  <a [href]="identity.ens.url" target="_blank" 
                     class="text-blue-600 hover:underline text-xs">
                    View →
                  </a>
                </div>
              </div>
            </div>

            <!-- Twitter -->
            <div *ngIf="identity.twitter" class="p-4 bg-sky-50 rounded-lg border border-sky-100">
              <div class="flex items-center gap-3">
                <img 
                  *ngIf="identity.twitter.avatar" 
                  [src]="identity.twitter.avatar" 
                  [alt]="identity.twitter.username || 'Twitter'"
                  class="w-12 h-12 rounded-full">
                <div class="flex-1">
                  <div class="flex items-center gap-2 mb-1">
                    <i class="fa fa-twitter text-sky-600"></i>
                    <span class="font-semibold text-sky-900">Twitter</span>
                  </div>
                  <p class="text-gray-700 font-medium">{{ identity.twitter.username }}</p>
                  <a [href]="identity.twitter.url" target="_blank" 
                     class="text-sky-600 hover:underline text-xs">
                    View →
                  </a>
                </div>
              </div>
            </div>

            <!-- GitHub -->
            <div *ngIf="identity.github" class="p-4 bg-gray-50 rounded-lg border border-gray-200">
              <div class="flex items-center gap-3">
                <img 
                  *ngIf="identity.github.avatar" 
                  [src]="identity.github.avatar" 
                  [alt]="identity.github.username || 'GitHub'"
                  class="w-12 h-12 rounded-full">
                <div class="flex-1">
                  <div class="flex items-center gap-2 mb-1">
                    <i class="fa fa-github text-gray-700"></i>
                    <span class="font-semibold text-gray-900">GitHub</span>
                  </div>
                  <p class="text-gray-700 font-medium">{{ identity.github.username }}</p>
                  <a [href]="identity.github.url" target="_blank" 
                     class="text-gray-700 hover:underline text-xs">
                    View →
                  </a>
                </div>
              </div>
            </div>

            <!-- Zora -->
            <div *ngIf="identity.zora" class="p-4 bg-pink-50 rounded-lg border border-pink-100">
              <div class="flex items-center gap-3">
                <img 
                  *ngIf="identity.zora.avatar" 
                  [src]="identity.zora.avatar" 
                  [alt]="identity.zora.username || 'Zora'"
                  class="w-12 h-12 rounded-full">
                <div class="flex-1">
                  <div class="flex items-center gap-2 mb-1">
                    <i class="fa fa-palette text-pink-600"></i>
                    <span class="font-semibold text-pink-900">Zora</span>
                  </div>
                  <p class="text-gray-700 font-medium">{{ identity.zora.username }}</p>
                  <a [href]="identity.zora.url" target="_blank" 
                     class="text-pink-600 hover:underline text-xs">
                    View →
                  </a>
                </div>
              </div>
            </div>

            <!-- Lens -->
            <div *ngIf="identity.lens" class="p-4 bg-green-50 rounded-lg border border-green-100">
              <div class="flex items-center gap-3">
                <img 
                  *ngIf="identity.lens.avatar" 
                  [src]="identity.lens.avatar" 
                  [alt]="identity.lens.username || 'Lens'"
                  class="w-12 h-12 rounded-full">
                <div class="flex-1">
                  <div class="flex items-center gap-2 mb-1">
                    <i class="fa fa-leaf text-green-600"></i>
                    <span class="font-semibold text-green-900">Lens Protocol</span>
                  </div>
                  <p class="text-gray-700 font-medium">{{ identity.lens.username }}</p>
                  <a [href]="identity.lens.url" target="_blank" 
                     class="text-green-600 hover:underline text-xs">
                    View →
                  </a>
                </div>
              </div>
            </div>
          </div>

          <!-- Total Count -->
          <div class="mt-6 text-center text-gray-500 text-sm">
            Found {{ identity.allProfiles.length }} connected profile(s)
          </div>
        </div>
      </div>

    </div>
  </section>

</div>